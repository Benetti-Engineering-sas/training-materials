\documentclass[a4wide]{book}

\usepackage{labs}
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{verbatim}
\usepackage{moreverb}
\usepackage{xcolor}

% Custom bootlin commands

% environment for long lines of code/cmd input with backslash at end of line 
\lstnewenvironment{terminalinput}{\lstset{
  language=[LaTeX]TeX,
  basicstyle=\ttfamily,
  breaklines=true,
  escapechar={\%},
  prebreak=\textbackslash,
%  aboveskip=0pt
  belowskip=0pt,
%  postbreak=\mbox{\textcolor{red}{$\rightarrow$}\space},
  columns=fullflexible
}}{}

% environment for long lines of u-boot cmd input without backslash at end of line 
\lstnewenvironment{ubootinput}{\lstset{
  autogobble,
  language=[LaTeX]TeX,
  basicstyle=\ttfamily,
  breaklines=true,
  escapechar={\%},
  prebreak={},
  belowskip=0pt,
%  postbreak=\mbox{\textcolor{red}{$\rightarrow$}\space},
  columns=fullflexible
}}{}

% environment for long lines of cmd output without backslash but with
% following lines aligned at left margin
\lstnewenvironment{terminaloutput}{\lstset{
  language=[LaTeX]TeX,
  basicstyle=\ttfamily,
  breakautoindent=false,
  breakindent=0pt,
  breaklines=true,
  escapechar={\%},
  prebreak={},
  belowskip=0pt,
%  postbreak=\mbox{\textcolor{red}{$\rightarrow$}\space},
  columns=fullflexible
}}{}

\newcommand{\sourcecode}[1]{\verbatimtabinput{../#1}{\small (Source code link:
\url{https://raw.githubusercontent.com/bootlin/training-materials/master/#1})}}

\title{\labbooktitle \\
\vspace{0.5cm}
\ifdefstring{\labbooksubtitle}{}{}{\Large \labbooksubtitle \\}
\huge\vspace{1cm} Practical Labs}
\trainingurl{https://bootlin.com/doc/training/__SESSION_NAME__}

\begin{document}
\maketitle

\makeabout

