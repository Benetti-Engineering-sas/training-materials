\begin{frame}
  \frametitle{Debugging locking and concurrency issues}
  \begin{itemize}
  \item Lock debugging: prove locking correctness
    \begin{itemize}
    \item \kconfig{CONFIG_PROVE_LOCKING}
    \item Adds instrumentation to kernel locking code
    \item Detect violations of locking rules during system life, such as:
      \begin{itemize}
      \item Locks acquired in different order (keeps track of locking
        sequences and compares them).
      \item Spinlocks acquired in interrupt handlers and also in
        process context when interrupts are enabled.
      \end{itemize}
    \item Not suitable for production systems but acceptable overhead
      in development.
    \item See \kdochtml{locking/lockdep-design} for details
    \end{itemize}
  \item Kernel Concurrency SANitizer framework
     \begin{itemize}
     \item \kconfig{CONFIG_KCSAN}, introduced in Linux 5.8.
     \item Can find concurrency issues in your system.
     \item See \url{https://lwn.net/Articles/816850/} for details.
     \end{itemize}
  \end{itemize}
\end{frame}
